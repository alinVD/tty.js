!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.tty=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={"default":a("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":11}],2:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":12}],3:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":13}],4:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":14}],5:[function(a,b,c){b.exports={"default":a("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":15}],6:[function(a,b,c){"use strict";c["default"]=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},c.__esModule=!0},{}],7:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/define-property")["default"];c["default"]=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),d(a,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c.__esModule=!0},{"babel-runtime/core-js/object/define-property":3}],8:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/get-own-property-descriptor")["default"];c["default"]=function(a,b,c){for(var e=!0;e;){var f=a,g=b,h=c;i=k=j=void 0,e=!1;var i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;return void 0===j?void 0:j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return void 0;a=k,b=g,c=h,e=!0}},c.__esModule=!0},{"babel-runtime/core-js/object/get-own-property-descriptor":4}],9:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/create")["default"];c["default"]=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=d(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)},c.__esModule=!0},{"babel-runtime/core-js/object/create":2}],10:[function(a,b,c){"use strict";c["default"]=function(a){return a&&a.__esModule?a:{"default":a}},c.__esModule=!0},{}],11:[function(a,b,c){a("../modules/es6.object.to-string"),a("../modules/es6.string.iterator"),a("../modules/web.dom.iterable"),a("../modules/es6.map"),a("../modules/es7.map.to-json"),b.exports=a("../modules/$").core.Map},{"../modules/$":29,"../modules/es6.map":38,"../modules/es6.object.to-string":40,"../modules/es6.string.iterator":41,"../modules/es7.map.to-json":42,"../modules/web.dom.iterable":43}],12:[function(a,b,c){var d=a("../../modules/$");b.exports=function(a,b){return d.create(a,b)}},{"../../modules/$":29}],13:[function(a,b,c){var d=a("../../modules/$");b.exports=function(a,b,c){return d.setDesc(a,b,c)}},{"../../modules/$":29}],14:[function(a,b,c){var d=a("../../modules/$");a("../../modules/es6.object.statics-accept-primitives"),b.exports=function(a,b){return d.getDesc(a,b)}},{"../../modules/$":29,"../../modules/es6.object.statics-accept-primitives":39}],15:[function(a,b,c){a("../../modules/es6.object.statics-accept-primitives"),b.exports=a("../../modules/$").core.Object.keys},{"../../modules/$":29,"../../modules/es6.object.statics-accept-primitives":39}],16:[function(a,b,c){function d(a,b,c){if(!a)throw TypeError(c?b+c:b)}var e=a("./$");d.def=e.assertDefined,d.fn=function(a){if(!e.isFunction(a))throw TypeError(a+" is not a function!");return a},d.obj=function(a){if(!e.isObject(a))throw TypeError(a+" is not an object!");return a},d.inst=function(a,b,c){if(!(a instanceof b))throw TypeError(c+": use the 'new' operator!");return a},b.exports=d},{"./$":29}],17:[function(a,b,c){function d(a){return g.call(a).slice(8,-1)}var e=a("./$"),f=a("./$.wks")("toStringTag"),g={}.toString;d.classof=function(a){var b,c;return void 0==a?void 0===a?"Undefined":"Null":"string"==typeof(c=(b=Object(a))[f])?c:d(b)},d.set=function(a,b,c){a&&!e.has(a=c?a:a.prototype,f)&&e.hide(a,f,b)},b.exports=d},{"./$":29,"./$.wks":36}],18:[function(a,b,c){"use strict";function d(a,b){if(!n(a))return("string"==typeof a?"S":"P")+a;if(!l(a,q)){if(!p(a))return"F";if(!b)return"E";o(a,q,++w)}return"O"+a[q]}function e(a,b){var c,e=d(b);if("F"!=e)return a[r][e];for(c=a[t];c;c=c.n)if(c.k==b)return c}var f=a("./$"),g=a("./$.ctx"),h=a("./$.uid").safe,i=a("./$.assert"),j=a("./$.for-of"),k=a("./$.iter").step,l=f.has,m=f.set,n=f.isObject,o=f.hide,p=Object.isExtensible||n,q=h("id"),r=h("O1"),s=h("last"),t=h("first"),u=h("iter"),v=f.DESC?h("size"):"size",w=0;b.exports={getConstructor:function(b,c,d){function h(){var a=i.inst(this,h,b),e=arguments[0];m(a,r,f.create(null)),m(a,v,0),m(a,s,void 0),m(a,t,void 0),void 0!=e&&j(e,c,a[d],a)}return a("./$.mix")(h.prototype,{clear:function(){for(var a=this,b=a[r],c=a[t];c;c=c.n)c.r=!0,c.p&&(c.p=c.p.n=void 0),delete b[c.i];a[t]=a[s]=void 0,a[v]=0},"delete":function(a){var b=this,c=e(b,a);if(c){var d=c.n,f=c.p;delete b[r][c.i],c.r=!0,f&&(f.n=d),d&&(d.p=f),b[t]==c&&(b[t]=d),b[s]==c&&(b[s]=f),b[v]--}return!!c},forEach:function(a){for(var b,c=g(a,arguments[1],3);b=b?b.n:this[t];)for(c(b.v,b.k,this);b&&b.r;)b=b.p},has:function(a){return!!e(this,a)}}),f.DESC&&f.setDesc(h.prototype,"size",{get:function(){return i.def(this[v])}}),h},def:function(a,b,c){var f,g,h=e(a,b);return h?h.v=c:(a[s]=h={i:g=d(b,!0),k:b,v:c,p:f=a[s],n:void 0,r:!1},a[t]||(a[t]=h),f&&(f.n=h),a[v]++,"F"!=g&&(a[r][g]=h)),a},getEntry:e,setIter:function(b,c,d){a("./$.iter-define")(b,c,function(a,b){m(this,u,{o:a,k:b})},function(){for(var a=this[u],b=a.k,c=a.l;c&&c.r;)c=c.p;return a.o&&(a.l=c=c?c.n:a.o[t])?"keys"==b?k(0,c.k):"values"==b?k(0,c.v):k(0,[c.k,c.v]):(a.o=void 0,k(1))},d?"entries":"values",!d,!0)}}},{"./$":29,"./$.assert":16,"./$.ctx":21,"./$.for-of":23,"./$.iter":28,"./$.iter-define":26,"./$.mix":30,"./$.uid":34}],19:[function(a,b,c){var d=a("./$.def"),e=a("./$.for-of");b.exports=function(a){d(d.P,a,{toJSON:function(){var a=[];return e(this,!1,a.push,a),a}})}},{"./$.def":22,"./$.for-of":23}],20:[function(a,b,c){"use strict";var d=a("./$"),e=a("./$.def"),f=a("./$.iter").BUGGY,g=a("./$.for-of"),h=a("./$.species"),i=a("./$.assert").inst;b.exports=function(b,c,j,k,l){function m(b,c){if(d.FW){var e=q[b];a("./$.redef")(q,b,function(a,b){var d=e.call(this,0===a?0:a,b);return c?this:d})}}var n=d.g[b],o=n,p=k?"set":"add",q=o&&o.prototype,r={};if(d.isFunction(o)&&(l||!f&&q.forEach&&q.entries)){var s,t=new o,u=t[p](l?{}:-0,1);a("./$.iter-detect")(function(a){new o(a)})||(o=function(){i(this,o,b);var a=new n,c=arguments[0];return void 0!=c&&g(c,k,a[p],a),a},o.prototype=q,d.FW&&(q.constructor=o)),l||t.forEach(function(a,b){s=1/b===-(1/0)}),s&&(m("delete"),m("has"),k&&m("get")),(s||u!==t)&&m(p,!0)}else o=j.getConstructor(b,k,p),a("./$.mix")(o.prototype,c);return a("./$.cof").set(o,b),r[b]=o,e(e.G+e.W+e.F*(o!=n),r),h(o),h(d.core[b]),l||j.setIter(o,b,k),o}},{"./$":29,"./$.assert":16,"./$.cof":17,"./$.def":22,"./$.for-of":23,"./$.iter":28,"./$.iter-detect":27,"./$.mix":30,"./$.redef":31,"./$.species":32}],21:[function(a,b,c){var d=a("./$.assert").fn;b.exports=function(a,b,c){if(d(a),~c&&void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},{"./$.assert":16}],22:[function(a,b,c){function d(a,b){return function(){return a.apply(b,arguments)}}function e(a,b,c){var f,j,k,l,m=a&e.G,n=a&e.P,o=m?g:a&e.S?g[b]:(g[b]||{}).prototype,p=m?h:h[b]||(h[b]={});m&&(c=b);for(f in c)j=!(a&e.F)&&o&&f in o,j&&f in p||(k=j?o[f]:c[f],m&&!i(o[f])?l=c[f]:a&e.B&&j?l=d(k,g):a&e.W&&o[f]==k?!function(a){l=function(b){return this instanceof a?new a(b):a(b)},l.prototype=a.prototype}(k):l=n&&i(k)?d(Function.call,k):k,p[f]=l,n&&((p.prototype||(p.prototype={}))[f]=k))}var f=a("./$"),g=f.g,h=f.core,i=f.isFunction;e.F=1,e.G=2,e.S=4,e.P=8,e.B=16,e.W=32,b.exports=e},{"./$":29}],23:[function(a,b,c){var d=a("./$.ctx"),e=a("./$.iter").get,f=a("./$.iter-call");b.exports=function(a,b,c,g){for(var h,i=e(a),j=d(c,g,b?2:1);!(h=i.next()).done;)if(f(i,j,h.value,b)===!1)return f.close(i)}},{"./$.ctx":21,"./$.iter":28,"./$.iter-call":25}],24:[function(a,b,c){b.exports=function(a){return a.FW=!1,a.path=a.core,a}},{}],25:[function(a,b,c){function d(a){var b=a["return"];void 0!==b&&f(b.call(a))}function e(a,b,c,e){try{return e?b(f(c)[0],c[1]):b(c)}catch(g){throw d(a),g}}var f=a("./$.assert").obj;e.close=d,b.exports=e},{"./$.assert":16}],26:[function(a,b,c){var d=a("./$.def"),e=a("./$.redef"),f=a("./$"),g=a("./$.cof"),h=a("./$.iter"),i=a("./$.wks")("iterator"),j="@@iterator",k="keys",l="values",m=h.Iterators;b.exports=function(a,b,c,n,o,p,q){function r(a){function b(b){return new c(b,a)}switch(a){case k:return function(){return b(this)};case l:return function(){return b(this)}}return function(){return b(this)}}h.create(c,b,n);var s,t,u=b+" Iterator",v=a.prototype,w=v[i]||v[j]||o&&v[o],x=w||r(o);if(w){var y=f.getProto(x.call(new a));g.set(y,u,!0),f.FW&&f.has(v,j)&&h.set(y,f.that)}if(f.FW&&h.set(v,x),m[b]=x,m[u]=f.that,o)if(s={keys:p?x:r(k),values:o==l?x:r(l),entries:o!=l?x:r("entries")},q)for(t in s)t in v||e(v,t,s[t]);else d(d.P+d.F*h.BUGGY,b,s)}},{"./$":29,"./$.cof":17,"./$.def":22,"./$.iter":28,"./$.redef":31,"./$.wks":36}],27:[function(a,b,c){var d=a("./$.wks")("iterator"),e=!1;try{var f=[7][d]();f["return"]=function(){e=!0},Array.from(f,function(){throw 2})}catch(g){}b.exports=function(a){if(!e)return!1;var b=!1;try{var c=[7],f=c[d]();f.next=function(){b=!0},c[d]=function(){return f},a(c)}catch(g){}return b}},{"./$.wks":36}],28:[function(a,b,c){"use strict";function d(a,b){e.hide(a,h,b),i in[]&&e.hide(a,i,b)}var e=a("./$"),f=a("./$.cof"),g=a("./$.assert").obj,h=a("./$.wks")("iterator"),i="@@iterator",j={},k={};d(k,e.that),b.exports={BUGGY:"keys"in[]&&!("next"in[].keys()),Iterators:j,step:function(a,b){return{value:b,done:!!a}},is:function(a){var b=Object(a),c=e.g.Symbol,d=c&&c.iterator||i;return d in b||h in b||e.has(j,f.classof(b))},get:function(a){var b=e.g.Symbol,c=a[b&&b.iterator||i],d=c||a[h]||j[f.classof(a)];return g(d.call(a))},set:d,create:function(a,b,c,d){a.prototype=e.create(d||k,{next:e.desc(1,c)}),f.set(a,b+" Iterator")}}},{"./$":29,"./$.assert":16,"./$.cof":17,"./$.wks":36}],29:[function(a,b,c){"use strict";function d(a){return isNaN(a=+a)?0:(a>0?p:o)(a)}function e(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}function f(a,b,c){return a[b]=c,a}function g(a){return s?function(b,c,d){return u.setDesc(b,c,e(a,d))}:f}function h(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function i(a){return"function"==typeof a}function j(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}var k="undefined"!=typeof self?self:Function("return this")(),l={},m=Object.defineProperty,n={}.hasOwnProperty,o=Math.ceil,p=Math.floor,q=Math.max,r=Math.min,s=!!function(){try{return 2==m({},"a",{get:function(){return 2}}).a}catch(a){}}(),t=g(1),u=b.exports=a("./$.fw")({g:k,core:l,html:k.document&&document.documentElement,isObject:h,isFunction:i,it:function(a){return a},that:function(){return this},toInteger:d,toLength:function(a){return a>0?r(d(a),9007199254740991):0},toIndex:function(a,b){return a=d(a),0>a?q(a+b,0):r(a,b)},has:function(a,b){return n.call(a,b)},create:Object.create,getProto:Object.getPrototypeOf,DESC:s,desc:e,getDesc:Object.getOwnPropertyDescriptor,setDesc:m,setDescs:Object.defineProperties,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:j,ES5Object:Object,toObject:function(a){return u.ES5Object(j(a))},hide:t,def:g(0),set:k.Symbol?f:t,each:[].forEach});"undefined"!=typeof __e&&(__e=l),"undefined"!=typeof __g&&(__g=k)},{"./$.fw":24}],30:[function(a,b,c){var d=a("./$.redef");b.exports=function(a,b){for(var c in b)d(a,c,b[c]);return a}},{"./$.redef":31}],31:[function(a,b,c){b.exports=a("./$").hide},{"./$":29}],32:[function(a,b,c){var d=a("./$"),e=a("./$.wks")("species");b.exports=function(a){!d.DESC||e in a||d.setDesc(a,e,{configurable:!0,get:d.that})}},{"./$":29,"./$.wks":36}],33:[function(a,b,c){var d=a("./$");b.exports=function(a){return function(b,c){var e,f,g=String(d.assertDefined(b)),h=d.toInteger(c),i=g.length;return 0>h||h>=i?a?"":void 0:(e=g.charCodeAt(h),55296>e||e>56319||h+1===i||(f=g.charCodeAt(h+1))<56320||f>57343?a?g.charAt(h):e:a?g.slice(h,h+2):(e-55296<<10)+(f-56320)+65536)}}},{"./$":29}],34:[function(a,b,c){function d(a){return"Symbol(".concat(void 0===a?"":a,")_",(++e+Math.random()).toString(36))}var e=0;d.safe=a("./$").g.Symbol||d,b.exports=d},{"./$":29}],35:[function(a,b,c){var d=a("./$"),e=a("./$.wks")("unscopables");!d.FW||e in[]||d.hide(Array.prototype,e,{}),b.exports=function(a){d.FW&&([][e][a]=!0)}},{"./$":29,"./$.wks":36}],36:[function(a,b,c){var d=a("./$").g,e={};b.exports=function(b){return e[b]||(e[b]=d.Symbol&&d.Symbol[b]||a("./$.uid").safe("Symbol."+b))}},{"./$":29,"./$.uid":34}],37:[function(a,b,c){var d=a("./$"),e=a("./$.unscope"),f=a("./$.uid").safe("iter"),g=a("./$.iter"),h=g.step,i=g.Iterators;a("./$.iter-define")(Array,"Array",function(a,b){d.set(this,f,{o:d.toObject(a),i:0,k:b})},function(){var a=this[f],b=a.o,c=a.k,d=a.i++;return!b||d>=b.length?(a.o=void 0,h(1)):"keys"==c?h(0,d):"values"==c?h(0,b[d]):h(0,[d,b[d]])},"values"),i.Arguments=i.Array,e("keys"),e("values"),e("entries")},{"./$":29,"./$.iter":28,"./$.iter-define":26,"./$.uid":34,"./$.unscope":35}],38:[function(a,b,c){"use strict";var d=a("./$.collection-strong");a("./$.collection")("Map",{get:function(a){var b=d.getEntry(this,a);return b&&b.v},set:function(a,b){return d.def(this,0===a?0:a,b)}},d,!0)},{"./$.collection":20,"./$.collection-strong":18}],39:[function(a,b,c){var d=a("./$"),e=a("./$.def"),f=d.isObject,g=d.toObject;d.each.call("freeze,seal,preventExtensions,isFrozen,isSealed,isExtensible,getOwnPropertyDescriptor,getPrototypeOf,keys,getOwnPropertyNames".split(","),function(a,b){var c=(d.core.Object||{})[a]||Object[a],h=0,i={};i[a]=0==b?function(a){return f(a)?c(a):a}:1==b?function(a){return f(a)?c(a):a}:2==b?function(a){return f(a)?c(a):a}:3==b?function(a){return f(a)?c(a):!0}:4==b?function(a){return f(a)?c(a):!0}:5==b?function(a){return f(a)?c(a):!1}:6==b?function(a,b){return c(g(a),b)}:7==b?function(a){return c(Object(d.assertDefined(a)))}:8==b?function(a){return c(g(a))}:function(a){return c(g(a))};try{c("z")}catch(j){h=1}e(e.S+e.F*h,"Object",i)})},{"./$":29,"./$.def":22}],40:[function(a,b,c){"use strict";var d=a("./$.cof"),e={};e[a("./$.wks")("toStringTag")]="z",a("./$").FW&&"z"!=d(e)&&a("./$.redef")(Object.prototype,"toString",function(){return"[object "+d.classof(this)+"]"},!0)},{"./$":29,"./$.cof":17,"./$.redef":31,"./$.wks":36}],41:[function(a,b,c){var d=a("./$").set,e=a("./$.string-at")(!0),f=a("./$.uid").safe("iter"),g=a("./$.iter"),h=g.step;a("./$.iter-define")(String,"String",function(a){d(this,f,{o:String(a),i:0})},function(){var a,b=this[f],c=b.o,d=b.i;return d>=c.length?h(1):(a=e(c,d),b.i+=a.length,h(0,a))})},{"./$":29,"./$.iter":28,"./$.iter-define":26,"./$.string-at":33,"./$.uid":34}],42:[function(a,b,c){a("./$.collection-to-json")("Map")},{"./$.collection-to-json":19}],43:[function(a,b,c){a("./es6.array.iterator");var d=a("./$"),e=a("./$.iter").Iterators,f=a("./$.wks")("iterator"),g=e.Array,h=d.g.NodeList;!d.FW||!h||f in h.prototype||d.hide(h.prototype,f,g),e.NodeList=g},{"./$":29,"./$.iter":28,"./$.wks":36,"./es6.array.iterator":37}],44:[function(a,b,c){(function(a){(function(){"use strict";function a(){this._events=this._events||{}}function c(b){var d=this;if(!(this instanceof c))return new c(arguments[0],arguments[1],arguments[2]);a.call(this),"number"==typeof b&&(b={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),b=b||{},l(m(c.defaults),function(a){null==b[a]&&(b[a]=c.options[a],c[a]!==c.defaults[a]&&(b[a]=c[a])),d[a]=b[a]}),8===b.colors.length?b.colors=b.colors.concat(c._colors.slice(8)):16===b.colors.length?b.colors=b.colors.concat(c._colors.slice(16)):10===b.colors.length?b.colors=b.colors.slice(0,-2).concat(c._colors.slice(8,-2),b.colors.slice(-2)):18===b.colors.length&&(b.colors=b.colors.concat(c._colors.slice(16,-2),b.colors.slice(-2))),this.colors=b.colors,this.options=b,this.parent=b.body||b.parent||(n?n.getElementsByTagName("body")[0]:null),this.cols=b.cols||b.geometry[0],this.rows=b.rows||b.geometry[1],b.handler&&this.on("data",b.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!1,this.normal=null,this.prefixMode=!1,this.selectMode=!1,this.visualMode=!1,this.searchMode=!1,this.searchDown,this.entry="",this.entryPrefix="Search: ",this._real,this._selected,this._textarea,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.lines=[];for(var e=this.rows;e--;)this.lines.push(this.blankLine());this.tabs,this.setupStops()}function d(a,b,c,d){a.addEventListener(b,c,d||!1)}function e(a,b,c,d){a.removeEventListener(b,c,d||!1)}function f(a){return a.preventDefault&&a.preventDefault(),a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0,!1}function g(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function h(a){var b=a.getElementsByTagName("body")[0],c=a.createElement("span");c.innerHTML="hello world",b.appendChild(c);var d=c.scrollWidth;c.style.fontWeight="bold";var e=c.scrollWidth;return b.removeChild(c),d!==e}function i(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function j(a){return"＀">=a?!1:a>="！"&&"ﾾ">=a||a>="ￂ"&&"ￇ">=a||a>="ￊ"&&"ￏ">=a||a>="ￒ"&&"ￗ">=a||a>="ￚ"&&"ￜ">=a||a>="￠"&&"￦">=a||a>="￨"&&"￮">=a}function k(a,b,d){var e=a<<16|b<<8|d;if(null!=k._cache[e])return k._cache[e];for(var f,g,h,i,j,l=1/0,m=-1,n=0;n<c.vcolors.length;n++){if(f=c.vcolors[n],g=f[0],h=f[1],i=f[2],j=k.distance(a,b,d,g,h,i),0===j){m=n;break}l>j&&(l=j,m=n)}return k._cache[e]=m}function l(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)}function m(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}var n=this.document;a.prototype.addListener=function(a,b){this._events[a]=this._events[a]||[],this._events[a].push(b)},a.prototype.on=a.prototype.addListener,a.prototype.removeListener=function(a,b){if(this._events[a])for(var c=this._events[a],d=c.length;d--;)if(c[d]===b||c[d].listener===b)return void c.splice(d,1)},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]},a.prototype.once=function(a,b){function c(){var d=Array.prototype.slice.call(arguments);return this.removeListener(a,c),b.apply(this,d)}return c.listener=b,this.on(a,c)},a.prototype.emit=function(a){if(this._events[a])for(var b=Array.prototype.slice.call(arguments,1),c=this._events[a],d=c.length,e=0;d>e;e++)c[e].apply(this,b)},a.prototype.listeners=function(a){return this._events[a]=this._events[a]||[]};var o=0,p=1,q=2,r=3,s=4,t=5,u=6;g(c,a),c.prototype.eraseAttr=function(){return-512&this.defAttr|511&this.curAttr},c.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],c.xtermColors=["#000000","#cd0000","#00cd00","#cdcd00","#0000ee","#cd00cd","#00cdcd","#e5e5e5","#7f7f7f","#ff0000","#00ff00","#ffff00","#5c5cff","#ff00ff","#00ffff","#ffffff"],c.colors=function(){function a(a,c,d){e.push("#"+b(a)+b(c)+b(d))}function b(a){return a=a.toString(16),a.length<2?"0"+a:a}var d,e=c.tangoColors.slice(),f=[0,95,135,175,215,255];for(d=0;216>d;d++)a(f[d/36%6|0],f[d/6%6|0],f[d%6]);for(d=0;24>d;d++)f=8+10*d,a(f,f,f);return e}(),c.colors[256]="#000000",c.colors[257]="#f0f0f0",c._colors=c.colors.slice(),c.vcolors=function(){for(var a,b=[],d=c.colors,e=0;256>e;e++)a=parseInt(d[e].substring(1),16),b.push([a>>16&255,a>>8&255,255&a]);return b}(),c.defaults={colors:c.colors,convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!0,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,useStyle:!1},c.options={},l(m(c.defaults),function(a){c[a]=c.defaults[a],c.options[a]=c.defaults[a]}),c.focus=null,c.prototype.focus=function(){c.focus!==this&&(c.focus&&c.focus.blur(),this.sendFocus&&this.send("[I"),this.showCursor(),c.focus=this)},c.prototype.blur=function(){c.focus===this&&(this.cursorState=0,this.refresh(this.y,this.y),this.sendFocus&&this.send("[O"),c.focus=null)},c.prototype.initGlobal=function(){var a=this.document;c._boundDocs=c._boundDocs||[],~i(c._boundDocs,a)||(c._boundDocs.push(a),c.bindPaste(a),c.bindKeys(a),c.bindCopy(a),(this.isIpad||this.isIphone)&&c.fixIpad(a),this.useStyle&&c.insertStyle(a,this.colors[256],this.colors[257]))},c.bindPaste=function(a){var b=a.defaultView;d(b,"paste",function(a){var b=c.focus;if(b)return a.clipboardData?b.send(a.clipboardData.getData("text/plain")):b.context.clipboardData&&b.send(b.context.clipboardData.getData("Text")),b.element.contentEditable="inherit",f(a)})},c.bindKeys=function(a){d(a,"keydown",function(a){if(c.focus){var b=a.target||a.srcElement;if(b)return b===c.focus.element||b===c.focus.context||b===c.focus.document||b===c.focus.body||b===c._textarea||b===c.focus.parent?c.focus.keyDown(a):void 0}},!0),d(a,"keypress",function(a){if(c.focus){var b=a.target||a.srcElement;if(b)return b===c.focus.element||b===c.focus.context||b===c.focus.document||b===c.focus.body||b===c._textarea||b===c.focus.parent?c.focus.keyPress(a):void 0}},!0),d(a,"mousedown",function(a){if(c.focus){var b=a.target||a.srcElement;if(b){do if(b===c.focus.element)return;while(b=b.parentNode);c.focus.blur()}}})},c.bindCopy=function(a){var b=a.defaultView;d(b,"copy",function(a){var b=c.focus;if(b&&b._selected){var d=b.getCopyTextarea(),e=b.grabText(b._selected.x1,b._selected.x2,b._selected.y1,b._selected.y2);b.emit("copy",e),d.focus(),d.textContent=e,d.value=e,d.setSelectionRange(0,e.length),w(function(){b.element.focus(),b.focus()},1)}})},c.fixIpad=function(a){var b=a.createElement("textarea");b.style.position="absolute",b.style.left="-32000px",b.style.top="-32000px",b.style.width="0px",b.style.height="0px",b.style.opacity="0",b.style.backgroundColor="transparent",b.style.borderStyle="none",b.style.outlineStyle="none",b.autocapitalize="none",b.autocorrect="off",a.getElementsByTagName("body")[0].appendChild(b),c._textarea=b,w(function(){b.focus()},1e3)},c.insertStyle=function(a,b,c){var d=a.getElementById("term-style");if(!d){var e=a.getElementsByTagName("head")[0];if(e){var d=a.createElement("style");d.id="term-style",d.innerHTML=".terminal {\n  float: left;\n  border: "+b+' solid 5px;\n  font-family: "DejaVu Sans Mono", "Liberation Mono", monospace;\n  font-size: 11px;\n  color: '+c+";\n  background: "+b+";\n}\n\n.terminal-cursor {\n  color: "+b+";\n  background: "+c+";\n}\n",e.insertBefore(d,e.firstChild)}}},c.prototype.open=function(a){var b,e=this,f=0;if(this.parent=a||this.parent,!this.parent)throw new Error("Terminal requires a parent element.");for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.context.navigator&&this.context.navigator.userAgent&&(this.isMac=!!~this.context.navigator.userAgent.indexOf("Mac"),this.isIpad=!!~this.context.navigator.userAgent.indexOf("iPad"),this.isIphone=!!~this.context.navigator.userAgent.indexOf("iPhone"),this.isMSIE=!!~this.context.navigator.userAgent.indexOf("MSIE")),this.element=this.document.createElement("div"),this.element.className="terminal",this.element.style.outline="none",this.element.setAttribute("tabindex",0),this.element.style.backgroundColor=this.colors[256],this.element.style.color=this.colors[257],this.children=[];f<this.rows;f++)b=this.document.createElement("div"),this.element.appendChild(b),this.children.push(b);this.parent.appendChild(this.element),this.refresh(0,this.rows-1),this.initGlobal(),this.focus(),this.startBlink(),d(this.element,"focus",function(){e.focus(),(e.isIpad||e.isIphone)&&c._textarea.focus()}),d(this.element,"mousedown",function(){e.focus()}),d(this.element,"mousedown",function(a){var b=null!=a.button?+a.button:null!=a.which?a.which-1:null;e.isMSIE&&(b=1===b?0:4===b?1:b),2===b&&(e.element.contentEditable="true",w(function(){e.element.contentEditable="inherit"},1))},!0),this.bindMouse(),null==c.brokenBold&&(c.brokenBold=h(this.document)),w(function(){e.element.focus()},100)},c.prototype.bindMouse=function(){function a(a){var b,c;if(b=h(a),c=i(a))switch(g(b,c),a.type){case"mousedown":l=b;break;case"mouseup":l=32;break;case m:}}function b(a){var b,c=l;b=i(a),b&&(c+=32,g(c,b))}function c(a,b){if(k.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(b>2047&&(b=2047),a.push(192|b>>6),a.push(128|63&b))}else{if(255===b)return a.push(0);b>127&&(b=127),a.push(b)}}function g(a,b){if(k.vt300Mouse){a&=3,b.x-=32,b.y-=32;var d="[24";if(0===a)d+="1";else if(1===a)d+="3";else if(2===a)d+="5";else{if(3===a)return;d+="0"}return d+="~["+b.x+","+b.y+"]\r",void k.send(d)}if(k.decLocator)return a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&(a=3),void k.send("["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w");if(k.urxvtMouse)return b.x-=32,b.y-=32,b.x++,b.y++,void k.send("["+a+";"+b.x+";"+b.y+"M");if(k.sgrMouse)return b.x-=32,b.y-=32,void k.send("[<"+(3===(3&a)?-4&a:a)+";"+b.x+";"+b.y+(3===(3&a)?"m":"M"));var d=[];c(d,a),c(d,b.x),c(d,b.y),k.send("[M"+v.fromCharCode.apply(v,d))}function h(a){var b,c,d,e,f;switch(a.type){case"mousedown":b=null!=a.button?+a.button:null!=a.which?a.which-1:null,k.isMSIE&&(b=1===b?0:4===b?1:b);break;case"mouseup":b=3;break;case"DOMMouseScroll":b=a.detail<0?64:65;break;case"mousewheel":b=a.wheelDeltaY>0?64:65}return c=a.shiftKey?4:0,d=a.metaKey?8:0,e=a.ctrlKey?16:0,f=c|d|e,k.vt200Mouse?f&=e:k.normalMouse||(f=0),b=32+(f<<2)+b}function i(a){var b,c,d,e,f;if(null!=a.pageX){for(b=a.pageX,c=a.pageY,f=k.element;f&&f!==k.document.documentElement;)b-=f.offsetLeft,c-=f.offsetTop,f="offsetParent"in f?f.offsetParent:f.parentNode;return d=k.element.clientWidth,e=k.element.clientHeight,b=Math.round(b/d*k.cols),c=Math.round(c/e*k.rows),0>b&&(b=0),b>k.cols&&(b=k.cols),0>c&&(c=0),c>k.rows&&(c=k.rows),b+=32,c+=32,{x:b,y:c,type:a.type===m?"mousewheel":a.type}}}var j=this.element,k=this,l=32,m="onmousewheel"in this.context?"mousewheel":"DOMMouseScroll";d(j,"mousedown",function(c){return k.mouseEvents?(a(c),k.focus(),k.vt200Mouse?(a({__proto__:c,type:"mouseup"}),f(c)):(k.normalMouse&&d(k.document,"mousemove",b),k.x10Mouse||d(k.document,"mouseup",function g(c){return a(c),k.normalMouse&&e(k.document,"mousemove",b),e(k.document,"mouseup",g),f(c)}),f(c))):void 0}),d(j,m,function(b){return k.mouseEvents&&!(k.x10Mouse||k.vt300Mouse||k.decLocator)?(a(b),f(b)):void 0}),d(j,m,function(a){return k.mouseEvents||k.applicationKeypad?void 0:("DOMMouseScroll"===a.type?k.scrollDisp(a.detail<0?-5:5):k.scrollDisp(a.wheelDeltaY>0?-5:5),f(a))})},c.prototype.destroy=function(){this.readable=!1,this.writable=!1,this._events={},this.handler=function(){},this.write=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},c.prototype.refresh=function(a,b){var d,e,f,g,h,i,k,l,m,n,o,p,q,r;for(b-a>=this.rows/2&&(r=this.element.parentNode,r&&r.removeChild(this.element)),k=this.cols,e=a,b>=this.lines.length&&(this.log("`end` is too large. Most likely a bad CSR."),b=this.lines.length-1);b>=e;e++){for(q=e+this.ydisp,g=this.lines[q],h="",d=e!==this.y||!this.cursorState||this.ydisp!==this.ybase&&!this.selectMode||this.cursorHidden?-1:this.x,m=this.defAttr,f=0;k>f;f++){switch(l=g[f][0],i=g[f][1],f===d&&(l=-1),l!==m&&(m!==this.defAttr&&(h+="</span>"),l!==this.defAttr&&(-1===l?h+='<span class="reverse-video terminal-cursor">':(h+='<span style="',n=511&l,o=l>>9&511,p=l>>18,1&p&&(c.brokenBold||(h+="font-weight:bold;"),8>o&&(o+=8)),2&p&&(h+="text-decoration:underline;"),4&p&&(2&p?(h=h.slice(0,-1),h+=" blink;"):h+="text-decoration:blink;"),8&p&&(n=l>>9&511,o=511&l,1&p&&8>o&&(o+=8)),16&p&&(h+="visibility:hidden;"),256!==n&&(h+="background-color:"+this.colors[n]+";"),257!==o&&(h+="color:"+this.colors[o]+";"),h+='">'))),i){case"&":h+="&amp;";break;case"<":h+="&lt;";break;case">":h+="&gt;";break;default:" ">=i?h+="&nbsp;":(j(i)&&f++,h+=i)}m=l}m!==this.defAttr&&(h+="</span>"),this.children[e].innerHTML=h}r&&r.appendChild(this.element)},c.prototype._cursorBlink=function(){c.focus===this&&(this.cursorState^=1,this.refresh(this.y,this.y))},c.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},c.prototype.startBlink=function(){if(this.cursorBlink){var a=this;this._blinker=function(){a._cursorBlink()},this._blink=x(this._blinker,500)}},c.prototype.refreshBlink=function(){this.cursorBlink&&(clearInterval(this._blink),this._blink=x(this._blinker,500))},c.prototype.scroll=function(){var a;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,a=this.ybase+this.rows-1,a-=this.rows-1-this.scrollBottom,a===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(a,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},c.prototype.scrollDisp=function(a){this.ydisp+=a,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),this.refresh(0,this.rows-1)},c.prototype.write=function(a){var b,d,e,f=a.length,g=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());f>g;g++)switch(e=a[g],this.state){case o:switch(e){case"":this.bell();break;case"\n":case"":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"	":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=p;break;default:if(e>=" "&&(this.charset&&this.charset[e]&&(e=this.charset[e]),this.x>=this.cols&&(this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())),this.lines[this.y+this.ybase][this.x]=[this.curAttr,e],this.x++,this.updateRange(this.y),j(e))){if(b=this.y+this.ybase,this.cols<2||this.x>=this.cols){this.lines[b][this.x-1]=[this.curAttr," "];break}this.lines[b][this.x]=[this.curAttr," "],this.x++}}break;case p:switch(e){case"[":this.params=[],this.currentParam=0,this.state=q;break;case"]":
this.params=[],this.currentParam=0,this.state=r;break;case"P":this.params=[],this.currentParam=0,this.state=t;break;case"_":this.state=u;break;case"^":this.state=u;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,c.charsets.US),this.state=o,g++;break;case"(":case")":case"*":case"+":case"-":case".":switch(e){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=s;break;case"/":this.gcharset=3,this.state=s,g--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=o;break;case"8":this.restoreCursor(),this.state=o;break;case"#":this.state=o,g++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=o;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=o;break;default:this.state=o,this.error("Unknown ESC control: %s.",e)}break;case s:switch(e){case"0":d=c.charsets.SCLD;break;case"A":d=c.charsets.UK;break;case"B":d=c.charsets.US;break;case"4":d=c.charsets.Dutch;break;case"C":case"5":d=c.charsets.Finnish;break;case"R":d=c.charsets.French;break;case"Q":d=c.charsets.FrenchCanadian;break;case"K":d=c.charsets.German;break;case"Y":d=c.charsets.Italian;break;case"E":case"6":d=c.charsets.NorwegianDanish;break;case"Z":d=c.charsets.Spanish;break;case"H":case"7":d=c.charsets.Swedish;break;case"=":d=c.charsets.Swiss;break;case"/":d=c.charsets.ISOLatin,g++;break;default:d=c.charsets.US}this.setgCharset(this.gcharset,d),this.gcharset=null,this.state=o;break;case r:if(""===e||""===e){switch(""===e&&g++,this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=o}else this.params.length?this.currentParam+=e:e>="0"&&"9">=e?this.currentParam=10*this.currentParam+e.charCodeAt(0)-48:";"===e&&(this.params.push(this.currentParam),this.currentParam="");break;case q:if("?"===e||">"===e||"!"===e){this.prefix=e;break}if(e>="0"&&"9">=e){this.currentParam=10*this.currentParam+e.charCodeAt(0)-48;break}if("$"===e||'"'===e||" "===e||"'"===e){this.postfix=e;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===e)break;switch(this.state=o,e){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",e)}this.prefix="",this.postfix="";break;case t:if(""===e||""===e){switch(""===e&&g++,this.prefix){case"":break;case"$q":var h=this.currentParam,i=!1;switch(h){case'"q':h='0"q';break;case'"p':h='61"p';break;case"r":h=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":h="0m";break;default:this.error("Unknown DCS Pt: %s.",h),h=""}this.send("P"+ +i+"$r"+h+"\\");break;case"+p":break;case"+q":var h=this.currentParam,i=!1;this.send("P"+ +i+"+r"+h+"\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=o}else this.currentParam?this.currentParam+=e:this.prefix||"$"===e||"+"===e?2===this.prefix.length?this.currentParam=e:this.prefix+=e:this.currentParam=e;break;case u:(""===e||""===e)&&(""===e&&g++,this.state=o)}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd)},c.prototype.writeln=function(a){this.write(a+"\r\n")},c.prototype.keyDown=function(a){var b,c=this;switch(a.keyCode){case 8:if(a.shiftKey){b="\b";break}b="";break;case 9:if(a.shiftKey){b="[Z";break}b="	";break;case 13:b="\r";break;case 27:b="";break;case 37:if(this.applicationCursor){b="OD";break}b="[D";break;case 39:if(this.applicationCursor){b="OC";break}b="[C";break;case 38:if(this.applicationCursor){b="OA";break}if(a.ctrlKey)return this.scrollDisp(-1),f(a);b="[A";break;case 40:if(this.applicationCursor){b="OB";break}if(a.ctrlKey)return this.scrollDisp(1),f(a);b="[B";break;case 46:b="[3~";break;case 45:b="[2~";break;case 36:if(this.applicationKeypad){b="OH";break}b="OH";break;case 35:if(this.applicationKeypad){b="OF";break}b="OF";break;case 33:if(a.shiftKey)return this.scrollDisp(-(this.rows-1)),f(a);b="[5~";break;case 34:if(a.shiftKey)return this.scrollDisp(this.rows-1),f(a);b="[6~";break;case 112:b="OP";break;case 113:b="OQ";break;case 114:b="OR";break;case 115:b="OS";break;case 116:b="[15~";break;case 117:b="[17~";break;case 118:b="[18~";break;case 119:b="[19~";break;case 120:b="[20~";break;case 121:b="[21~";break;case 122:b="[23~";break;case 123:b="[24~";break;default:if(a.ctrlKey)if(a.keyCode>=65&&a.keyCode<=90){if(this.screenKeys&&!this.prefixMode&&!this.selectMode&&65===a.keyCode)return this.enterPrefix(),f(a);if(this.prefixMode&&86===a.keyCode)return void this.leavePrefix();if((this.prefixMode||this.selectMode)&&67===a.keyCode)return void(this.visualMode&&w(function(){c.leaveVisual()},1));b=v.fromCharCode(a.keyCode-64)}else 32===a.keyCode?b=v.fromCharCode(0):a.keyCode>=51&&a.keyCode<=55?b=v.fromCharCode(a.keyCode-51+27):56===a.keyCode?b=v.fromCharCode(127):219===a.keyCode?b=v.fromCharCode(27):221===a.keyCode&&(b=v.fromCharCode(29));else(!this.isMac&&a.altKey||this.isMac&&a.metaKey)&&(a.keyCode>=65&&a.keyCode<=90?b=""+v.fromCharCode(a.keyCode+32):192===a.keyCode?b="`":a.keyCode>=48&&a.keyCode<=57&&(b=""+(a.keyCode-48)))}return b?this.prefixMode?(this.leavePrefix(),f(a)):this.selectMode?(this.keySelect(a,b),f(a)):(this.emit("keydown",a),this.emit("key",b,a),this.showCursor(),this.handler(b),f(a)):!0},c.prototype.setgLevel=function(a){this.glevel=a,this.charset=this.charsets[a]},c.prototype.setgCharset=function(a,b){this.charsets[a]=b,this.glevel===a&&(this.charset=b)},c.prototype.keyPress=function(a){var b;if(f(a),a.charCode)b=a.charCode;else if(null==a.which)b=a.keyCode;else{if(0===a.which||0===a.charCode)return!1;b=a.which}return!b||a.ctrlKey||a.altKey||a.metaKey?!1:(b=v.fromCharCode(b),this.prefixMode?(this.leavePrefix(),this.keyPrefix(a,b),!1):this.selectMode?(this.keySelect(a,b),!1):(this.emit("keypress",b,a),this.emit("key",b,a),this.showCursor(),this.handler(b),!1))},c.prototype.send=function(a){var b=this;this.queue||w(function(){b.handler(b.queue),b.queue=""},1),this.queue+=a},c.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white",w(function(){a.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},c.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,a)}},c.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,a)}},c.prototype.resize=function(a,b){var c,d,e,f,g;if(1>a&&(a=1),1>b&&(b=1),f=this.cols,a>f)for(g=[this.defAttr," "],e=this.lines.length;e--;)for(;this.lines[e].length<a;)this.lines[e].push(g);else if(f>a)for(e=this.lines.length;e--;)for(;this.lines[e].length>a;)this.lines[e].pop();if(this.setupStops(f),this.cols=a,f=this.rows,b>f)for(d=this.element;f++<b;)this.lines.length<b+this.ybase&&this.lines.push(this.blankLine()),this.children.length<b&&(c=this.document.createElement("div"),d.appendChild(c),this.children.push(c));else if(f>b)for(;f-->b;)if(this.lines.length>b+this.ybase&&this.lines.pop(),this.children.length>b){if(d=this.children.pop(),!d)continue;d.parentNode.removeChild(d)}this.rows=b,this.y>=b&&(this.y=b-1),this.x>=a&&(this.x=a-1),this.scrollTop=0,this.scrollBottom=b-1,this.refresh(0,this.rows-1),this.normal=null},c.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a),a>this.refreshEnd&&(this.refreshEnd=a)},c.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},c.prototype.setupStops=function(a){for(null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this.cols;a+=8)this.tabs[a]=!0},c.prototype.prevStop=function(a){for(null==a&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this.cols?this.cols-1:0>a?0:a},c.prototype.nextStop=function(a){for(null==a&&(a=this.x);!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a},c.prototype.eraseRight=function(a,b){for(var c=this.lines[this.ybase+b],d=[this.eraseAttr()," "];a<this.cols;a++)c[a]=d;this.updateRange(b)},c.prototype.eraseLeft=function(a,b){var c=this.lines[this.ybase+b],d=[this.eraseAttr()," "];for(a++;a--;)c[a]=d;this.updateRange(b)},c.prototype.eraseLine=function(a){this.eraseRight(0,a)},c.prototype.blankLine=function(a){for(var b=a?this.eraseAttr():this.defAttr,c=[b," "],d=[],e=0;e<this.cols;e++)d[e]=c;return d},c.prototype.ch=function(a){return a?[this.eraseAttr()," "]:[this.defAttr," "]},c.prototype.is=function(a){var b=this.termName;return 0===(b+"").indexOf(a)},c.prototype.handler=function(a){this.emit("data",a)},c.prototype.handleTitle=function(a){this.emit("title",a)},c.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=o},c.prototype.reverseIndex=function(){var a;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),a=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-a+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=o},c.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols,c.call(this,this.options),this.refresh(0,this.rows-1)},c.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=o},c.prototype.cursorUp=function(a){var b=a[0];1>b&&(b=1),this.y-=b,this.y<0&&(this.y=0)},c.prototype.cursorDown=function(a){var b=a[0];1>b&&(b=1),this.y+=b,this.y>=this.rows&&(this.y=this.rows-1)},c.prototype.cursorForward=function(a){var b=a[0];1>b&&(b=1),this.x+=b,this.x>=this.cols&&(this.x=this.cols-1)},c.prototype.cursorBackward=function(a){var b=a[0];1>b&&(b=1),this.x-=b,this.x<0&&(this.x=0)},c.prototype.cursorPos=function(a){var b,c;b=a[0]-1,c=a.length>=2?a[1]-1:0,0>b?b=0:b>=this.rows&&(b=this.rows-1),0>c?c=0:c>=this.cols&&(c=this.cols-1),this.x=c,this.y=b},c.prototype.eraseInDisplay=function(a){var b;switch(a[0]){case 0:for(this.eraseRight(this.x,this.y),b=this.y+1;b<this.rows;b++)this.eraseLine(b);break;case 1:for(this.eraseLeft(this.x,this.y),b=this.y;b--;)this.eraseLine(b);break;case 2:for(b=this.rows;b--;)this.eraseLine(b);break;case 3:}},c.prototype.eraseInLine=function(a){switch(a[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},c.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])return void(this.curAttr=this.defAttr);for(var b,c=a.length,d=0,e=this.curAttr>>18,f=this.curAttr>>9&511,g=511&this.curAttr;c>d;d++)b=a[d],b>=30&&37>=b?f=b-30:b>=40&&47>=b?g=b-40:b>=90&&97>=b?(b+=8,f=b-90):b>=100&&107>=b?(b+=8,g=b-100):0===b?(e=this.defAttr>>18,f=this.defAttr>>9&511,g=511&this.defAttr):1===b?e|=1:4===b?e|=2:5===b?e|=4:7===b?e|=8:8===b?e|=16:22===b?e&=-2:24===b?e&=-3:25===b?e&=-5:27===b?e&=-9:28===b?e&=-17:39===b?f=this.defAttr>>9&511:49===b?g=511&this.defAttr:38===b?2===a[d+1]?(d+=2,f=k(255&a[d],255&a[d+1],255&a[d+2]),-1===f&&(f=511),d+=2):5===a[d+1]&&(d+=2,b=255&a[d],f=b):48===b?2===a[d+1]?(d+=2,g=k(255&a[d],255&a[d+1],255&a[d+2]),-1===g&&(g=511),d+=2):5===a[d+1]&&(d+=2,b=255&a[d],g=b):100===b?(f=this.defAttr>>9&511,g=511&this.defAttr):this.error("Unknown SGR attribute: %d.",b);this.curAttr=e<<18|f<<9|g},c.prototype.deviceStatus=function(a){if(this.prefix){if("?"===this.prefix)switch(a[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}else switch(a[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},c.prototype.insertChars=function(a){var b,c,d,e;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.x,e=[this.eraseAttr()," "];b--&&d<this.cols;)this.lines[c].splice(d++,0,e),this.lines[c].pop()},c.prototype.cursorNextLine=function(a){var b=a[0];1>b&&(b=1),this.y+=b,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},c.prototype.cursorPrecedingLine=function(a){var b=a[0];1>b&&(b=1),this.y-=b,this.y<0&&(this.y=0),this.x=0},c.prototype.cursorCharAbsolute=function(a){var b=a[0];1>b&&(b=1),this.x=b-1},c.prototype.insertLines=function(a){var b,c,d;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.rows-1-this.scrollBottom,d=this.rows-1+this.ybase-d+1;b--;)this.lines.splice(c,0,this.blankLine(!0)),this.lines.splice(d,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},c.prototype.deleteLines=function(a){var b,c,d;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.rows-1-this.scrollBottom,d=this.rows-1+this.ybase-d;b--;)this.lines.splice(d+1,0,this.blankLine(!0)),this.lines.splice(c,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},c.prototype.deleteChars=function(a){var b,c,d;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=[this.eraseAttr()," "];b--;)this.lines[c].splice(this.x,1),this.lines[c].push(d)},c.prototype.eraseChars=function(a){var b,c,d,e;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.x,e=[this.eraseAttr()," "];b--&&d<this.cols;)this.lines[c][d++]=e},c.prototype.charPosAbsolute=function(a){var b=a[0];1>b&&(b=1),this.x=b-1,this.x>=this.cols&&(this.x=this.cols-1)},c.prototype.HPositionRelative=function(a){var b=a[0];1>b&&(b=1),this.x+=b,this.x>=this.cols&&(this.x=this.cols-1)},c.prototype.sendDeviceAttributes=function(a){a[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(a[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},c.prototype.linePosAbsolute=function(a){var b=a[0];1>b&&(b=1),this.y=b-1,this.y>=this.rows&&(this.y=this.rows-1)},c.prototype.VPositionRelative=function(a){var b=a[0];1>b&&(b=1),this.y+=b,this.y>=this.rows&&(this.y=this.rows-1)},c.prototype.HVPosition=function(a){a[0]<1&&(a[0]=1),a[1]<1&&(a[1]=1),this.y=a[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=a[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},c.prototype.setMode=function(a){if("object"!=typeof a)if(this.prefix){if("?"===this.prefix)switch(a){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,c.charsets.US),this.setgCharset(1,c.charsets.US),this.setgCharset(2,c.charsets.US),this.setgCharset(3,c.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===a,this.vt200Mouse=1e3===a,this.normalMouse=a>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var b={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=b,this.showCursor()}}}else switch(a){case 4:this.insertMode=!0;break;case 20:}else for(var d=a.length,e=0;d>e;e++)this.setMode(a[e])},c.prototype.resetMode=function(a){if("object"!=typeof a)if(this.prefix){if("?"===this.prefix)switch(a){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(a){case 4:this.insertMode=!1;break;case 20:}else for(var b=a.length,c=0;b>c;c++)this.resetMode(a[c])},c.prototype.setScrollRegion=function(a){this.prefix||(this.scrollTop=(a[0]||1)-1,this.scrollBottom=(a[1]||this.rows)-1,this.x=0,this.y=0)},c.prototype.saveCursor=function(a){this.savedX=this.x,this.savedY=this.y},c.prototype.restoreCursor=function(a){this.x=this.savedX||0,this.y=this.savedY||0},c.prototype.cursorForwardTab=function(a){for(var b=a[0]||1;b--;)this.x=this.nextStop()},c.prototype.scrollUp=function(a){for(var b=a[0]||1;b--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},c.prototype.scrollDown=function(a){for(var b=a[0]||1;b--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},c.prototype.initMouseTracking=function(a){},c.prototype.resetTitleModes=function(a){},c.prototype.cursorBackwardTab=function(a){for(var b=a[0]||1;b--;)this.x=this.prevStop()},c.prototype.repeatPrecedingCharacter=function(a){for(var b=a[0]||1,c=this.lines[this.ybase+this.y],d=c[this.x-1]||[this.defAttr," "];b--;)c[this.x++]=d},c.prototype.tabClear=function(a){var b=a[0];0>=b?delete this.tabs[this.x]:3===b&&(this.tabs={})},c.prototype.mediaCopy=function(a){},c.prototype.setResources=function(a){},c.prototype.disableModifiers=function(a){},c.prototype.setPointerMode=function(a){},c.prototype.softReset=function(a){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},c.prototype.requestAnsiMode=function(a){},c.prototype.requestPrivateMode=function(a){},c.prototype.setConformanceLevel=function(a){},c.prototype.loadLEDs=function(a){},c.prototype.setCursorStyle=function(a){},c.prototype.setCharProtectionAttr=function(a){},c.prototype.restorePrivateValues=function(a){},c.prototype.setAttrInRectangle=function(a){for(var b,c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4];f+1>d;d++)for(b=this.lines[this.ybase+d],c=e;g>c;c++)b[c]=[h,b[c][1]];this.updateRange(a[0]),this.updateRange(a[2])},c.prototype.savePrivateValues=function(a){},c.prototype.manipulateWindow=function(a){},c.prototype.reverseAttrInRectangle=function(a){},c.prototype.setTitleModeFeature=function(a){},c.prototype.setWarningBellVolume=function(a){},c.prototype.setMarginBellVolume=function(a){},c.prototype.copyRectangle=function(a){},c.prototype.enableFilterRectangle=function(a){},c.prototype.requestParameters=function(a){},c.prototype.selectChangeExtent=function(a){},c.prototype.fillRectangle=function(a){for(var b,c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4];g+1>e;e++)for(b=this.lines[this.ybase+e],c=f;h>c;c++)b[c]=[b[c][0],v.fromCharCode(d)];this.updateRange(a[1]),this.updateRange(a[3])},c.prototype.enableLocatorReporting=function(a){a[0]>0},c.prototype.eraseRectangle=function(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=a[3];for(d=[this.eraseAttr()," "];g+1>e;e++)for(b=this.lines[this.ybase+e],c=f;h>c;c++)b[c]=d;this.updateRange(a[0]),this.updateRange(a[2])},c.prototype.setLocatorEvents=function(a){},c.prototype.selectiveEraseRectangle=function(a){},c.prototype.requestLocatorPosition=function(a){},c.prototype.insertColumns=function(){for(var a,b=params[0],c=this.ybase+this.rows,d=[this.eraseAttr()," "];b--;)for(a=this.ybase;c>a;a++)this.lines[a].splice(this.x+1,0,d),this.lines[a].pop();this.maxRange()},c.prototype.deleteColumns=function(){for(var a,b=params[0],c=this.ybase+this.rows,d=[this.eraseAttr()," "];b--;)for(a=this.ybase;c>a;a++)this.lines[a].splice(this.x,1),this.lines[a].push(d);this.maxRange()},c.prototype.enterPrefix=function(){this.prefixMode=!0},c.prototype.leavePrefix=function(){this.prefixMode=!1},c.prototype.enterSelect=function(){this._real={x:this.x,y:this.y,ydisp:this.ydisp,ybase:this.ybase,cursorHidden:this.cursorHidden,lines:this.copyBuffer(this.lines),write:this.write},this.write=function(){},this.selectMode=!0,this.visualMode=!1,this.cursorHidden=!1,this.refresh(this.y,this.y)},c.prototype.leaveSelect=function(){this.x=this._real.x,this.y=this._real.y,this.ydisp=this._real.ydisp,this.ybase=this._real.ybase,this.cursorHidden=this._real.cursorHidden,this.lines=this._real.lines,this.write=this._real.write,delete this._real,this.selectMode=!1,this.visualMode=!1,this.refresh(0,this.rows-1)},c.prototype.enterVisual=function(){this._real.preVisual=this.copyBuffer(this.lines),this.selectText(this.x,this.x,this.ydisp+this.y,this.ydisp+this.y),this.visualMode=!0},c.prototype.leaveVisual=function(){this.lines=this._real.preVisual,delete this._real.preVisual,delete this._selected,this.visualMode=!1,this.refresh(0,this.rows-1)},c.prototype.enterSearch=function(a){this.entry="",this.searchMode=!0,this.searchDown=a,this._real.preSearch=this.copyBuffer(this.lines),this._real.preSearchX=this.x,this._real.preSearchY=this.y;for(var b=this.ydisp+this.rows-1,c=0;c<this.entryPrefix.length;c++)this.lines[b][c]=[-512&this.defAttr|4,this.entryPrefix[c]];this.y=this.rows-1,this.x=this.entryPrefix.length,this.refresh(this.rows-1,this.rows-1)},c.prototype.leaveSearch=function(){this.searchMode=!1,this._real.preSearch&&(this.lines=this._real.preSearch,this.x=this._real.preSearchX,this.y=this._real.preSearchY,delete this._real.preSearch,delete this._real.preSearchX,delete this._real.preSearchY),this.refresh(this.rows-1,this.rows-1)},c.prototype.copyBuffer=function(a){for(var a=a||this.lines,b=[],c=0;c<a.length;c++){b[c]=[];for(var d=0;d<a[c].length;d++)b[c][d]=[a[c][d][0],a[c][d][1]]}return b},c.prototype.getCopyTextarea=function(a){var b=this._copyTextarea,c=this.document;return b||(b=c.createElement("textarea"),b.style.position="absolute",b.style.left="-32000px",b.style.top="-32000px",b.style.width="0px",b.style.height="0px",b.style.opacity="0",b.style.backgroundColor="transparent",b.style.borderStyle="none",b.style.outlineStyle="none",c.getElementsByTagName("body")[0].appendChild(b),this._copyTextarea=b),b},c.prototype.copyText=function(a){var b=this,c=this.getCopyTextarea();this.emit("copy",a),c.focus(),c.textContent=a,c.value=a,c.setSelectionRange(0,a.length),w(function(){b.element.focus(),b.focus()},1)},c.prototype.selectText=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(this._selected){for(e=this._selected.x1,f=this._selected.x2,g=this._selected.y1,h=this._selected.y2,g>h&&(i=f,f=e,e=i,i=h,h=g,g=i),e>f&&g===h&&(i=f,f=e,e=i),k=g;h>=k;k++)for(j=0,l=this.cols-1,k===g&&(j=e),k===h&&(l=f);l>=j;j++)null!=this.lines[k][j].old&&(m=this.lines[k][j].old,delete this.lines[k][j].old,this.lines[k][j]=[m,this.lines[k][j][1]]);c=this._selected.y1,a=this._selected.x1}for(c=Math.max(c,0),c=Math.min(c,this.ydisp+this.rows-1),d=Math.max(d,0),d=Math.min(d,this.ydisp+this.rows-1),this._selected={x1:a,x2:b,y1:c,y2:d},c>d&&(i=b,b=a,a=i,i=d,d=c,c=i),a>b&&c===d&&(i=b,b=a,a=i),k=c;d>=k;k++)for(j=0,l=this.cols-1,k===c&&(j=a),k===d&&(l=b);l>=j;j++)m=this.lines[k][j][0],this.lines[k][j]=[-512&m|261636,this.lines[k][j][1]],this.lines[k][j].old=m;c-=this.ydisp,d-=this.ydisp,c=Math.max(c,0),c=Math.min(c,this.rows-1),d=Math.max(d,0),d=Math.min(d,this.rows-1),this.refresh(0,this.rows-1)},c.prototype.grabText=function(a,b,c,d){var e,f,g,h,i,k="",l="";for(c>d&&(i=b,b=a,a=i,i=d,d=c,c=i),a>b&&c===d&&(i=b,b=a,a=i),g=c;d>=g;g++){for(f=0,h=this.cols-1,g===c&&(f=a),g===d&&(h=b);h>=f;f++)e=this.lines[g][f][1]," "!==e?(l&&(k+=l,l=""),k+=e,j(e)&&f++):l+=e;l="",k+="\n"}for(f=b,g=d;f<this.cols;f++)if(" "!==this.lines[g][f][1]){k=k.slice(0,-1);break}return k},c.prototype.keyPrefix=function(a,b){"k"===b||"&"===b?this.destroy():"p"===b||"]"===b?this.emit("request paste"):"c"===b?this.emit("request create"):b>="0"&&"9">=b?(b=+b-1,~b||(b=9),this.emit("request term",b)):"n"===b?this.emit("request term next"):"P"===b?this.emit("request term previous"):":"===b?this.emit("request command mode"):"["===b&&this.enterSelect()},c.prototype.keySelect=function(a,b){if(this.showCursor(),this.searchMode||"n"===b||"N"===b)return this.keySearch(a,b);if(""===b){var c=this.ydisp+this.y;return this.ydisp===this.ybase?(this.y=Math.min(this.y+(this.rows-1)/2|0,this.rows-1),this.refresh(0,this.rows-1)):this.scrollDisp((this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,c,this.ydisp+this.y))}if(""===b){var c=this.ydisp+this.y;return 0===this.ydisp?(this.y=Math.max(this.y-(this.rows-1)/2|0,0),this.refresh(0,this.rows-1)):this.scrollDisp(-(this.rows-1)/2|0),void(this.visualMode&&this.selectText(this.x,this.x,c,this.ydisp+this.y))}if(""===b){var c=this.ydisp+this.y;return this.scrollDisp(this.rows-1),void(this.visualMode&&this.selectText(this.x,this.x,c,this.ydisp+this.y))}if(""===b){var c=this.ydisp+this.y;return this.scrollDisp(-(this.rows-1)),void(this.visualMode&&this.selectText(this.x,this.x,c,this.ydisp+this.y))}if("k"===b||"[A"===b){var c=this.ydisp+this.y;return this.y--,this.y<0&&(this.y=0,this.scrollDisp(-1)),void(this.visualMode?this.selectText(this.x,this.x,c,this.ydisp+this.y):this.refresh(this.y,this.y+1))}if("j"===b||"[B"===b){var c=this.ydisp+this.y;return this.y++,this.y>=this.rows&&(this.y=this.rows-1,this.scrollDisp(1)),void(this.visualMode?this.selectText(this.x,this.x,c,this.ydisp+this.y):this.refresh(this.y-1,this.y))}if("h"===b||"[D"===b){var d=this.x;return this.x--,this.x<0&&(this.x=0),void(this.visualMode?this.selectText(d,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("l"===b||"[C"===b){var d=this.x;return this.x++,this.x>=this.cols&&(this.x=this.cols-1),void(this.visualMode?this.selectText(d,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("v"===b||" "===b)return void(this.visualMode?this.leaveVisual():this.enterVisual());if("y"!==b){if("q"===b||""===b)return void(this.visualMode?this.leaveVisual():this.leaveSelect());if("w"===b||"W"===b){for(var e=this.x,f=this.y,g=this.ydisp,d=this.x,c=this.y,h=this.ydisp,i=!1;;){for(var j=this.lines[h+c];d<this.cols;){if(j[d][1]<=" ")i=!0;else if(i)break;d++}if(d>=this.cols&&(d=this.cols-1),!(d===this.cols-1&&j[d][1]<=" "))break;if(d=0,++c>=this.rows&&(c--,++h>this.ybase)){h=this.ybase,d=this.x;break}}return this.x=d,this.y=c,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(e,this.x,f+g,this.ydisp+this.y))}if("b"===b||"B"===b){for(var e=this.x,f=this.y,g=this.ydisp,d=this.x,c=this.y,h=this.ydisp;;){for(var j=this.lines[h+c],i=d>0&&j[d][1]>" "&&j[d-1][1]>" ";d>=0;){if(j[d][1]<=" "){if(i&&d+1<this.cols&&j[d+1][1]>" "){d++;break}i=!0}d--}if(0>d&&(d=0),0!==d||!(j[d][1]<=" ")&&i)break;if(d=this.cols-1,--c<0&&(c++,--h<0)){h++,d=0;break}}return this.x=d,this.y=c,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(e,this.x,f+g,this.ydisp+this.y))}if("e"===b||"E"===b){var d=this.x+1,c=this.y,h=this.ydisp;for(d>=this.cols&&d--;;){for(var j=this.lines[h+c];d<this.cols&&j[d][1]<=" ";)d++;for(;d<this.cols;){if(j[d][1]<=" "&&d-1>=0&&j[d-1][1]>" "){d--;break}d++}if(d>=this.cols&&(d=this.cols-1),!(d===this.cols-1&&j[d][1]<=" "))break;if(d=0,++c>=this.rows&&(c--,++h>this.ybase)){h=this.ybase;break}}return this.x=d,this.y=c,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(e,this.x,f+g,this.ydisp+this.y))}if("^"===b||"0"===b){var e=this.x;if("0"===b)this.x=0;else if("^"===b){for(var j=this.lines[this.ydisp+this.y],d=0;d<this.cols&&!(j[d][1]>" ");)d++;d>=this.cols&&(d=this.cols-1),this.x=d}return void(this.visualMode?this.selectText(e,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("$"===b){for(var e=this.x,j=this.lines[this.ydisp+this.y],d=this.cols-1;d>=0;){if(j[d][1]>" "){this.visualMode&&d<this.cols-1&&d++;break}d--}return 0>d&&(d=0),this.x=d,void(this.visualMode?this.selectText(e,this.x,this.ydisp+this.y,this.ydisp+this.y):this.refresh(this.y,this.y))}if("g"===b||"G"===b){var e=this.x,f=this.y,g=this.ydisp;return"g"===b?(this.x=0,this.y=0,this.scrollDisp(-this.ydisp)):"G"===b&&(this.x=0,this.y=this.rows-1,this.scrollDisp(this.ybase)),void(this.visualMode&&this.selectText(e,this.x,f+g,this.ydisp+this.y))}if("H"===b||"M"===b||"L"===b){var e=this.x,f=this.y;return"H"===b?(this.x=0,this.y=0):"M"===b?(this.x=0,this.y=this.rows/2|0):"L"===b&&(this.x=0,this.y=this.rows-1),void(this.visualMode?this.selectText(e,this.x,this.ydisp+f,this.ydisp+this.y):(this.refresh(f,f),this.refresh(this.y,this.y)))}if("{"===b||"}"===b){var j,k,e=this.x,f=this.y,g=this.ydisp,l=!1,m=!1,n=-1,c=this.y+("{"===b?-1:1),h=this.ydisp;for("{"===b?0>c&&(c++,h>0&&h--):"}"===b&&c>=this.rows&&(c--,h<this.ybase&&h++);;){for(j=this.lines[h+c],k=0;k<this.cols;k++){if(j[k][1]>" "){-1===n&&(n=0),l=!0;break}if(k===this.cols-1){-1===n?n=1:0===n?m=!0:1===n&&l&&(m=!0);break}}if(m)break;if("{"===b){if(c--,0>c){if(c++,!(h>0))break;h--}}else if("}"===b&&(c++,c>=this.rows)){if(c--,!(h<this.ybase))break;h++}}return m||("{"===b?(c=0,h=0):"}"===b&&(c=this.rows-1,h=this.ybase)),this.x=0,this.y=c,this.scrollDisp(-this.ydisp+h),void(this.visualMode&&this.selectText(e,this.x,f+g,this.ydisp+this.y))}return"/"===b||"?"===b?void(this.visualMode||this.enterSearch("/"===b)):!1;
}if(this.visualMode){var o=this.grabText(this._selected.x1,this._selected.x2,this._selected.y1,this._selected.y2);this.copyText(o),this.leaveVisual()}},c.prototype.keySearch=function(a,b){if(""===b)return void this.leaveSearch();if("\r"===b||!this.searchMode&&("n"===b||"N"===b)){this.leaveSearch();var c=this.entry;if(!c)return void this.refresh(0,this.rows-1);for(var d,e,f,g=this.x,h=this.y,i=this.ydisp,j=!1,k=!1,l=this.x+1,m=this.ydisp+this.y,n="N"===b?this.searchDown:!this.searchDown;;){for(d=this.lines[m];l<this.cols;){for(f=0;f<c.length&&!(l+f>=this.cols)&&d[l+f][1]===c[f];f++)if(d[l+f][1]===c[f]&&f===c.length-1){j=!0;break}if(j)break;l+=f+1}if(j)break;if(l=0,n){if(m--,0>m){if(k)break;k=!0,m=this.ybase+this.rows-1}}else if(m++,m>this.ybase+this.rows-1){if(k)break;k=!0,m=0}}return j?(m-this.ybase<0?(e=m,m=0,e>this.ybase&&(m=e-this.ybase,e=this.ybase)):(e=this.ybase,m-=this.ybase),this.x=l,this.y=m,this.scrollDisp(-this.ydisp+e),void(this.visualMode&&this.selectText(g,this.x,h+i,this.ydisp+this.y))):void this.refresh(0,this.rows-1)}if("\b"===b||""===b){if(0===this.entry.length)return;var o=this.ydisp+this.rows-1;this.entry=this.entry.slice(0,-1);var f=this.entryPrefix.length+this.entry.length;return this.lines[o][f]=[this.lines[o][f][0]," "],this.x--,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}if(1===b.length&&b>=" "&&"~">=b){var o=this.ydisp+this.rows-1;this.entry+=b;var f=this.entryPrefix.length+this.entry.length-1;return this.lines[o][f]=[-512&this.defAttr|4,b],this.x++,this.refresh(this.rows-1,this.rows-1),void this.refresh(this.y,this.y)}return!1},c.charsets={},c.charsets.SCLD={"`":"◆",a:"▒",b:"	",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},c.charsets.UK=null,c.charsets.US=null,c.charsets.Dutch=null,c.charsets.Finnish=null,c.charsets.French=null,c.charsets.FrenchCanadian=null,c.charsets.German=null,c.charsets.Italian=null,c.charsets.NorwegianDanish=null,c.charsets.Spanish=null,c.charsets.Swedish=null,c.charsets.Swiss=null,c.charsets.ISOLatin=null;var v=this.String,w=this.setTimeout,x=this.setInterval;k._cache={},k.distance=function(a,b,c,d,e,f){return Math.pow(30*(a-d),2)+Math.pow(59*(b-e),2)+Math.pow(11*(c-f),2)},c.EventEmitter=a,c.inherits=g,c.on=d,c.off=e,c.cancel=f,"undefined"!=typeof b?b.exports=c:this.Terminal=c}).call(function(){return this||("undefined"!=typeof window?window:a)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(a,b,c){"use strict";var d=a("babel-runtime/core-js/object/define-property")["default"],e=a("babel-runtime/helpers/interop-require-default")["default"];d(c,"__esModule",{value:!0});var f=a("./window"),g=e(f),h=a("./tab"),i=e(h),j=a("./tty"),k=e(j);c.Window=g["default"],c.Tab=i["default"],c.TTY=k["default"]},{"./tab":46,"./tty":47,"./window":49,"babel-runtime/core-js/object/define-property":3,"babel-runtime/helpers/interop-require-default":10}],46:[function(a,b,c){"use strict";function d(a,b,c){var d=this,e=a.cols,f=a.rows;i["default"].call(this,{cols:e,rows:f});var h=document.creatElement("div");h.className="tab",h.innerHTML="•",g.on(h,"click",function(a){return a.ctrlKey||a.altKey||a.metaKey||a.shiftKey?d.destroy():d.focus(),g.cancel(a)}),this.socket=b,this.window=a,this.session=a.session,this.button=h,this.element=null,this.open(),this.hookKeys(),c?(this.id=c.id,this.pty=c.pty,this.setProcessName(c.process),this._resize(c.cols,c.rows)):(this.id="",this.process="",this.socket.emit("create",this.session,e,f,function(a,b){return a?d._destroy():(d.pty=b.pty,d.id=b.id,d.setProcessName(b.process),void d.emit("open"))}))}var e=a("babel-runtime/core-js/object/define-property")["default"],f=a("babel-runtime/helpers/interop-require-default")["default"];e(c,"__esModule",{value:!0});var g=a("./utils"),h=a("term.js/src/term"),i=f(h);g.inherits(d,i["default"]),d.prototype.handler=function(a){this.socket.emit("data",this.session,this.id,a)},d.prototype.handleTitle=function(a){a&&(a=g.sanitize(a),this.title=a)},d.prototype._write=d.prototype.write,d.prototype.write=function(a){return this.window.focused!==this&&(this.button.style.color="red"),this._write(a)},d.prototype._focus=d.prototype.focus,d.prototype.focus=function(){var a=this.button,b=this.window,c=this.tty;a.style.fontWeight="bold",a.style.color="",this.handleTitle(this.title),this._focus(),b.focusTab(this),this.emit("focus"),b.emit("focus tab",this),c.emit("focus tab",this)},d.prototype.unfocus=function(){var a=this.button;a.style.fontWeight=""},d.prototype._resize=d.prototype.resize,d.prototype.resize=function(a,b){var c=this.window,d=this.tty;this.socket.emit("resize",this.session,this.id,a,b),this._resize(a,b),this.emit("resize",a,b),c.emit("resize tab",this,a,b),d.emit("resize tab",this,a,b)},d.prototype.__destroy=d.prototype.destroy,d.prototype._destroy=function(){if(!this.destroyed){this.destroyed=!0;var a=this.window;this.button.parentNode.removeChild(this.button),this.element.parentNode&&this.element.parentNode.removeChild(this.element),a.removeTab(this),this.__destroy()}},d.prototype.destroy=function(){this.destroyed||(this.socket.emit("kill",this.session,this.id),this._destroy(),this.emit("close"),this.window.emit("close tab",this),this.tty.emit("close tab",this))},d.prototype.hookKeys=function(){var a=this;this.on("key",function(b){if(i["default"].focusKeys!==!1){var c,d,e=a.tty,f=e.windows;if("j"===b)c=-1;else{if("k"!==b)return;c=1}if(d=g.indexOf(a.tty.windows,a.window)+c,a._ignoreNext(),f[d])return f[d].highlight();if(c>0){if(f[0])return f[0].highlight()}else if(d=f.length-1,f[d])return f[d].highlight();return a.window.highlight()}}),this.on("request paste",function(){a.socket.emit("request paste",function(b,c){b||a.send(c)})}),this.on("request create",function(){a.window.createTab()}),this.on("request term",function(b){a.window.tabs[b]&&a.window.tabs[b].focus()}),this.on("request term next",function(){a.window.nextTab()}),this.on("request term previous",function(){a.window.previousTab()})},d.prototype._ignoreNext=function(){var a=this.handler;this.handler=function(){this.handler=a};var b=this.showCursor;this.showCursor=function(){this.showCursor=b}},d.scrollable={irssi:!0,man:!0,less:!0,htop:!0,top:!0,w3m:!0,lynx:!0,mocp:!0},d.prototype._bindMouse=d.prototype.bindMouse,d.prototype.bindMouse=function(){if(!i["default"].programFeatures)return this._bindMouse();var a=this,b="onmousewheel"in window?"mousewheel":"DOMMouseScroll";return g.on(a.element,b,function(b){return!a.mouseEvents&&d.scrollable[a.process]?("mousewheel"===b.type&&b.wheelDeltaY>0||"DOMMouseScroll"===b.type&&b.detail<0?a.keyDown({keyCode:33}):a.keyDown({keyCode:34}),g.cancel(b)):void 0}),this._bindMouse()},d.prototype.pollProcessName=function(a){var b=this;this.socket.emit("process",this.session,this.id,function(c,d){return c?a&&a(c):(b.setProcessName(d),a&&a(null,d))})},d.prototype.setProcessName=function(a){a=g.sanitize(a),this.process!==a&&this.emit("process",a),this.process=a,this.button.title=a},c["default"]=d,b.exports=c["default"]},{"./utils":48,"babel-runtime/core-js/object/define-property":3,"babel-runtime/helpers/interop-require-default":10,"term.js/src/term":44}],47:[function(a,b,c){"use strict";var d=a("babel-runtime/helpers/inherits")["default"],e=a("babel-runtime/helpers/get")["default"],f=a("babel-runtime/helpers/create-class")["default"],g=a("babel-runtime/helpers/class-call-check")["default"],h=a("babel-runtime/core-js/object/define-property")["default"],i=a("babel-runtime/core-js/map")["default"],j=a("babel-runtime/core-js/object/keys")["default"],k=a("babel-runtime/helpers/interop-require-default")["default"];h(c,"__esModule",{value:!0});var l=a("./window"),m=k(l),n=a("./utils"),o=function(a){function b(a){var c=this;g(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);var d=this.socket=a.socket;this.root=a.root,this.sessions=new i,this.windows=new i,d.on("connect",function(){c.reset(),c.emit("connect")}),d.on("session created",function(a){c.sessions.set(a.id,a),c.emit("session created",a)}),d.on("session closed",function(a){c.sessions["delete"](a),c.emit("session closed",a),c.windows.has(a)&&c.windows.get(a).destroy()}),d.on("data",function(a,b,d){c.windows.has(a)&&c.windows.get(a).write(b,d)}),d.on("kill",function(a,b){c.windows.has(a)&&c.windows.get(a).kill(b)}),d.on("sync",function(a,b){c.windows.has(a)&&c.windows.get(a).sync(b)}),a.autoPoll&&(this.poller=setInterval(function(){c.pollSessions()},a.autoPoll))}return d(b,a),f(b,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.poller&&(clearInterval(this.poller),delete this.poller),this.sessions.clear(),this.windows.forEach(function(a){a.destroy()}))}},{key:"reset",value:function(){this.sessions.clear(),this.windows.forEach(function(a){a.destroy()}),this.windows.clear(),this.emit("reset")}},{key:"newSession",value:function(){var a=this;this.socket.emit("new session",function(b,c){b?a.emit("error",{action:"newSession",error:b}):(a.sessions.set(c.id,c),a.newWindow(c.id))})}},{key:"newWindow",value:function(a){var b=this,c=this.sessions,d=this.windows;if(d.has(a)||!c.has(a))return null;this.socket.emit("attach",a);var e=new m["default"](this,a,this.socket);return d.set(a,e),e.once("open",function(){b.emit("open window",e)}),e.on("close",function(){d["delete"](a),b.socket.emit("detatch",a)}),e}},{key:"pollSessions",value:function(){var a=this;this.socket.emit("list sessions",function(b,c){return b?void a.emit("error",{action:"pollSessions",err:b}):(a.sessions.clear(),j(c).forEach(function(b){a.sessions.set(b,c[b])}),void a.emit("sessions list",c))})}}]),b}(n.EventEmitter);c["default"]=o,b.exports=c["default"]},{"./utils":48,"./window":49,"babel-runtime/core-js/map":1,"babel-runtime/core-js/object/define-property":3,"babel-runtime/core-js/object/keys":5,"babel-runtime/helpers/class-call-check":6,"babel-runtime/helpers/create-class":7,"babel-runtime/helpers/get":8,"babel-runtime/helpers/inherits":9,"babel-runtime/helpers/interop-require-default":10}],48:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function e(a,b){var c=d(a,b);~c&&a.splice(c,1)}function f(a){return a?(a+"").replace(/[&<>]/g,""):""}var g=a("babel-runtime/core-js/object/define-property")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];g(c,"__esModule",{value:!0});var i=a("term.js/src/term"),j=h(i);c.indexOf=d,c.splice=e,c.sanitize=f;var k=j["default"].EventEmitter;c.EventEmitter=k;var l=j["default"].inherits;c.inherits=l;var m=j["default"].on;c.on=m;var n=j["default"].off;c.off=n;var o=j["default"].cancel;c.cancel=o},{"babel-runtime/core-js/object/define-property":3,"babel-runtime/helpers/interop-require-default":10,"term.js/src/term":44}],49:[function(a,b,c){"use strict";function d(a,b,c){var d=this;i.EventEmitter.call(this);var e,g,h,j,k;e=document.createElement("div"),e.className="window",g=document.createElement("div"),g.className="grip",h=document.createElement("div"),h.className="bar",j=document.createElement("div"),j.innerHTML="~",j.title="new/close",j.className="tab",k=document.createElement("div"),k.className="title",k.innerHTML="",this.tty=a,this.session=b,this.socket=c,this.element=e,this.grip=g,this.bar=h,this.button=j,this.title=k,this.tabs=new f,this.focused=null,this.cols=m["default"].geometry[0],this.rows=m["default"].geometry[1],e.appendChild(g),e.appendChild(h),h.appendChild(j),h.appendChild(k);var l=this.createTab();this.focus(),this.bind(),l.once("open",function(){d.emit("open")})}var e=a("babel-runtime/core-js/object/define-property")["default"],f=a("babel-runtime/core-js/map")["default"],g=a("babel-runtime/core-js/object/keys")["default"],h=a("babel-runtime/helpers/interop-require-default")["default"];e(c,"__esModule",{value:!0});var i=a("./utils"),j=a("./tab"),k=h(j),l=a("term.js/src/term"),m=h(l);i.inherits(d,i.EventEmitter),d.prototype.bind=function(){var a=this,b=this.element,c=this.bar,d=this.grip,e=this.button,f=0;i.on(e,"click",function(b){return b.ctrlKey||b.altKey||b.metaKey||b.shiftKey?a.destroy():a.createTab(),i.cancel(b)}),i.on(d,"mousedown",function(b){return a.focus(),a.resizing(b),i.cancel(b)}),i.on(b,"mousedown",function(d){if(d.target===b||d.target===c){a.focus(),i.cancel(d);var e=new Date(Date.now());return 600>e-f?a.maximize():(f=e,i.cancel(d))}})},d.prototype.focus=function(){var a=this.element.parentNode;a&&(a.removeChild(this.element),a.appendChild(this.element)),this.emit("focus")},d.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.minimize&&this.minimize(),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.each(function(a){a.destroy()}),this.emit("close"))},d.prototype.drag=function(a){function b(a){e.style.left=h.left+a.pageX-h.pageX+"px",e.style.top=h.top+a.pageY-h.pageY+"px"}function c(){e.style.opacity="",e.style.cursor="",g.style.cursor="",i.off(document,"mousemove",b),i.off(document,"mouseup",c);var a={left:e.style.left.replace(/\w+/g,""),top:e.style.top.replace(/\w+/g,"")};d.emit("drag",a)}var d=this,e=this.element,f=this.tty,g=f.root;if(!this.minimize){var h={left:e.offsetLeft,top:e.offsetTop,pageX:a.pageX,pageY:a.pageY};e.style.opacity="0.60",e.style.cursor="move",g.style.cursor="move",i.on(document,"mousemove",b),i.on(document,"mouseup",c)}},d.prototype.resizing=function(){function a(a){var b,c;c=d.offsetHeight-e.element.clientHeight,b=a.pageX-d.offsetLeft,c=a.pageY-d.offsetTop-c,d.style.width=b+"px",d.style.height=c+"px"}function b(){var f,j;f=d.clientWidth/h.w,j=d.clientHeight/h.h,f=f*e.cols|0,j=j*e.rows|0,c.resize(f,j),d.style.width="",d.style.height="",d.style.overflow="",d.style.opacity="",d.style.cursor="",g.style.cursor="",e.element.style.height="",i.off(document,"mousemove",a),i.off(document,"mouseup",b)}var c=this,d=this.element,e=this.focused,f=this.tty,g=f.root;this.minimize&&delete this.minimize;var h={w:d.clientWidth,h:d.clientHeight};d.style.overflow="hidden",d.style.opacity="0.70",d.style.cursor="se-resize",g.style.cursor="se-resize",e.element.style.height="100%",i.on(document,"mousemove",a),i.on(document,"mouseup",b)},d.prototype.maximize=function(){if(this.minimize)return this.minimize();var a,b,c=this,d=this.element,e=this.focused,f=this.tty,g=f.root,h={cols:e.cols,rows:e.rows,left:d.offsetLeft,top:d.offsetTop,root:g.className};this.minimize=function(){delete this.minimize,d.style.left=h.left+"px",d.style.top=h.top+"px",d.style.width="",d.style.height="",e.element.style.width="",e.element.style.height="",d.style.boxSizing="",c.grip.style.display="",g.className=h.root,c.resize(h.cols,h.rows),c.emit("minimize")},window.scrollTo(0,0),a=g.clientWidth/e.element.offsetWidth,b=g.clientHeight/e.element.offsetHeight,a=a*e.cols|0,b=b*e.rows|0,d.style.left="0px",d.style.top="0px",d.style.width="100%",d.style.height="100%",e.element.style.width="100%",e.element.style.height="100%",d.style.boxSizing="border-box",this.grip.style.display="none",g.className="maximized",this.resize(a,b),this.emit("maximize")},d.prototype.resize=function(a,b){this.cols=a,this.rows=b,this.each(function(c){c.resize(a,b)}),this.emit("resize",a,b)},d.prototype.each=function(a){for(var b=this.tabs.length;b--;)a(this.tabs[b],b)},d.prototype.createTab=function(a){var b=this,c=new k["default"](this,this.socket,a);return this.bar.appendChild(c.button),c.id&&this.tabs.set(c.id,c),c.on("process",function(a){b.focused===c&&(b.window.title.innerHTML=a)}),c.on("open",function(){b.tabs.set(c.id,c),b.emit("open tab",c)}),c},d.prototype.highlight=function(){var a=this;this.element.style.borderColor="orange",setTimeout(function(){a.element.style.borderColor=""},200),this.focus()},d.prototype.focusTab=function(a){var b=this.title,c=this.element;this.focused&&this.focused!==a&&(this.focused.unfocus(),c.removeChild(this.focused.element)),this.focused||(c.appendChild(a.element),this.focused=a),b.innerHTML=a.process,this.focus()},d.prototype.nextTab=function(){var a,b,c=this.tabs,d=this.focused;c.forEach(function(c){b||(b=c),a&&a===d&&(b=c),a=c}),b&&b.focus()},d.prototype.previousTab=function(){var a,b,c=this.tabs,d=this.focused;c.forEach(function(c){c===d&&a&&(b=a),a=c}),b?b.focus():a&&a.focus()},d.prototype.removeTab=function(a){this.tabs.has(a.id)&&this.tabs["delete"](a.id),this.focused===a&&this.previousTab(),this.tabs.size||this.syncing||this.destroy()},d.prototype.write=function(a,b){this.tabs.has(a)&&this.tabs.get(a).write(b)},d.prototype.kill=function(a){this.tabs.has(a)&&this.tabs.get(a).destroy()},d.prototype.sync=function(a){var b,c=this;this.syncing=!0,this.tabs.forEach(function(a){a._destroy()}),this.tabs.clear(),g(a).forEach(function(d){var e=a[d],f=c.createTab(e);b||(b=f)}),this.syncing=!1,this.emit("sync",this),b&&b.focus()},c["default"]=d,b.exports=c["default"]},{"./tab":46,"./utils":48,"babel-runtime/core-js/map":1,"babel-runtime/core-js/object/define-property":3,"babel-runtime/core-js/object/keys":5,"babel-runtime/helpers/interop-require-default":10,"term.js/src/term":44}]},{},[45])(45)});
//# sourceMappingURL=tty.min.js.map